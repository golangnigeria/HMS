{{template "lab" .}}

{{define "title"}}Lab Portal â€“ KiLab{{end}}

{{define "css"}}
<link
  href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
  rel="stylesheet"
/>
{{end}}

{{define "content"}}
<div class="flex min-h-screen bg-gray-50 dark:bg-slate-900 transition-colors duration-300">

  <!-- Sidebar Overlay (Mobile) -->
  <div id="sidebar-overlay"
    class="fixed inset-0 bg-black/50 lg:hidden z-30 hidden cursor-pointer"
  ></div>

  <!-- Sidebar -->
  {{template "lab_aside" .}}

  <!-- Main Content -->
  <main class="flex-1 flex flex-col min-h-screen relative z-10">
    {{template "lab_header" .}}
    {{template "search_bar" .}}
    {{template "lab_table" .}}
  </main>
</div>

{{end}}

{{define "scripts"}}
  <script>
  // Theme & Sidebar Logic
  document.addEventListener("DOMContentLoaded", function () {
    const body = document.documentElement;
    const sidebar = document.getElementById("lab-sidebar");
    const sidebarOverlay = document.getElementById("sidebar-overlay");
    const toggleSidebarBtns = document.querySelectorAll(".toggle-sidebar");
    const toggleThemeBtn = document.getElementById("toggle-theme");

    // === Dark Mode ===
    if (localStorage.theme === "dark") {
      body.classList.add("dark");
    }

    if (toggleThemeBtn) {
      toggleThemeBtn.addEventListener("click", () => {
        body.classList.toggle("dark");
        const isDark = body.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
        toggleThemeBtn.innerHTML = isDark
          ? '<i class="ri-sun-line text-lg"></i>'
          : '<i class="ri-moon-line text-lg"></i>';
      });
    }

    // === Sidebar Toggle ===
    function openSidebar() {
      sidebar.classList.remove("-translate-x-full");
      sidebarOverlay.classList.remove("hidden");
    }

    function closeSidebar() {
      sidebar.classList.add("-translate-x-full");
      sidebarOverlay.classList.add("hidden");
    }

    toggleSidebarBtns.forEach((btn) =>
      btn.addEventListener("click", () => {
        if (sidebar.classList.contains("-translate-x-full")) {
          openSidebar();
        } else {
          closeSidebar();
        }
      })
    );

    sidebarOverlay.addEventListener("click", closeSidebar);
  });
</script>
{{end}}

