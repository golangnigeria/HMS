{{define "navbar"}}
<header 
  class="w-full fixed top-0 left-0 z-50 bg-white/70 dark:bg-gray-900/70 backdrop-blur-md border-b border-gray-200 dark:border-gray-800 transition-all"
  x-data="navbar()"
  x-init="init()"
>
  <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3 md:py-4">

    <!-- Brand -->
    <a href="/" class="flex items-center space-x-2">
      <img src="/static/assets/favicon.png" alt="Logo" class="h-8 w-8 rounded-full object-cover">
      <span class="text-xl font-semibold text-gray-900 dark:text-white">Dr. KiLab</span>
    </a>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center space-x-8 text-sm font-medium">
      <template x-for="link in links" :key="link.href">
        <a :href="link.href" 
           :class="{'text-blue-600 dark:text-blue-400': isActive(link.href), 'text-gray-700 dark:text-gray-300': !isActive(link.href)}"
           class="hover:text-blue-600 dark:hover:text-blue-400 transition">
          <span x-text="link.label"></span>
        </a>
      </template>
    </nav>

    <!-- Right Side -->
    <div class="hidden md:flex items-center space-x-4">
      <a href="/login" class="px-4 py-2 text-sm font-medium border rounded-lg border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition">Login</a>
      <a href="/register" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition">Register</a>
      <button @click="toggleTheme"
              class="ml-2 px-3 py-2 rounded-md text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition">
        <span x-text="theme === 'light' ? 'ðŸŒ™ Dark' : 'â˜€ï¸ Light'"></span>
      </button>
    </div>

    <!-- Mobile Menu Button -->
    <button @click="open = !open" class="md:hidden text-gray-700 dark:text-gray-300 focus:outline-none">
      <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
      <svg x-show="open" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <!-- Mobile Dropdown -->
  <div x-show="open" x-transition @click.away="open = false"
       class="md:hidden bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 px-4 py-4 space-y-3">
    <template x-for="link in links" :key="link.href">
      <a :href="link.href"
         :class="{'text-blue-600 dark:text-blue-400': isActive(link.href), 'text-gray-700 dark:text-gray-300': !isActive(link.href)}"
         class="block hover:text-blue-600 dark:hover:text-blue-400">
        <span x-text="link.label"></span>
      </a>
    </template>
    <div class="flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-800">
      <button @click="toggleTheme" class="text-sm text-gray-600 dark:text-gray-300">
        <span x-text="theme === 'light' ? 'ðŸŒ™ Dark' : 'â˜€ï¸ Light'"></span>
      </button>
      <div class="flex space-x-2">
        <a href="/login" class="px-3 py-1 border rounded-md text-sm border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800">Login</a>
        <a href="/register" class="px-3 py-1 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700">Register</a>
      </div>
    </div>
  </div>

  <!-- Alpine.js Logic -->
  <script>
    function navbar() {
      return {
        open: false,
        theme: localStorage.theme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'),
        links: [
          { href: '/', label: 'Home' },
          { href: '/about', label: 'About' },
          { href: '/blog/bloglist', label: 'Blog' },
         /*  { href: '/courses', label: 'Courses' },
          { href: '/book', label: 'Book a Session' }, */
          { href: '/admin/blog/create', label: 'Create Blog' }
        ],

        init() {
          document.documentElement.classList.toggle('dark', this.theme === 'dark');
        },

        toggleTheme() {
          this.theme = this.theme === 'light' ? 'dark' : 'light';
          localStorage.theme = this.theme;
          document.documentElement.classList.toggle('dark', this.theme === 'dark');
        },

        isActive(href) {
          return window.location.pathname === href;
        }
      }
    }
  </script>
</header>
{{end}}
